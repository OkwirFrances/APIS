import{r as s,u as I,R as t,O as S,i as l,l as v}from"./index-DWn6bmYd.js";/* empty css                         */import{N as E}from"./Navbar-DCydfKUn.js";import{S as y}from"./Sidebar-pqAnLTFO.js";import{y as r}from"./index-DleFuWzd.js";import"./logo-CuFHB95l.js";import"./search-at9jTNkc.js";import"./mail-Bx0Ydk2F.js";import"./person-BMtGrJo0.js";const D=()=>{const[n,i]=s.useState([]),[u,m]=s.useState([]),[g,o]=s.useState(!0),d=I();s.useEffect(()=>{localStorage.setItem("userRole","registrar")},[]);const c=async()=>{try{o(!0);const[e,a]=await Promise.all([l.getIssues(),v.getLecturers()]);i(e),m(a)}catch(e){e==="Unauthorized"?p():r.error(e||"Failed to fetch data")}finally{o(!1)}},f=async(e,a)=>{try{await l.assignIssue(e,a),await c(),r.success("Issue assigned successfully")}catch(h){r.error(h||"Failed to assign issue")}},p=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("refreshToken"),d("/signin")};return s.useEffect(()=>{c()},[]),t.createElement("div",{className:"dashboard-container"},t.createElement(E,null),t.createElement(y,null),t.createElement("div",{className:"dashboard-content"},t.createElement(S,{context:{allIssues:n,lecturers:u,loading:g,onAssignIssue:f}})))};export{D as default};
