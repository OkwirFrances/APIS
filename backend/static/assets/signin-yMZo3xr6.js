import{u as g,r as c,R as e,a as p}from"./index-DWn6bmYd.js";import{l as E}from"./logo-CuFHB95l.js";import{m as h}from"./mail-Bx0Ydk2F.js";import{p as f}from"./padlock-sT52jjSD.js";const S=()=>{const r=g(),[t,m]=c.useState({email:"",password:""}),[n,s]=c.useState(""),o=l=>{const{name:a,value:u}=l.target;m({...t,[a]:u})},i=async l=>{if(l.preventDefault(),!t.email||!t.password){s("Please fill in all fields.");return}if(t.password.length<8){s("Password must be at least 8 characters long.");return}try{const a=await p.login(t.email,t.password);switch(localStorage.setItem("authToken",a.access),localStorage.setItem("refreshToken",a.refresh),localStorage.setItem("userRole",a.role),localStorage.setItem("userEmail",a.email),localStorage.setItem("userFullname",a.fullname),a.role){case"lecturer":r("/lecturer/dashboard");break;case"student":r("/student/dashboard");break;case"registrar":r("/registrar/dashboard");break;default:s("Unknown user role.");break}}catch(a){console.error("Sign-in failed:",a),s(a.message||"Unable to connect to the server. Please try again later.")}},d=t.email&&t.password.length>=8;return e.createElement("div",{className:"signin-container"},e.createElement("div",{className:"signin-left"},e.createElement("img",{src:E,alt:"logo",className:"muk"}),e.createElement("h1",{className:"system-title"},"Welcome to the",e.createElement("br",null)," Academic Issue Tracking System",e.createElement("br",null),"AITS")),e.createElement("div",{className:"signin-right"},e.createElement("form",{className:"signin-right-form",onSubmit:i},e.createElement("h2",{className:"title"},"Sign In Into Your Account"),e.createElement("p",{className:"sub-title"},"Please fill in all the fields below"),n&&e.createElement("p",{className:"error-message"},n),e.createElement("label",null,"Email Address",e.createElement("div",{className:"input-container"},e.createElement("input",{className:"emailaddress",type:"email",name:"email",placeholder:"Enter Your Email Address",value:t.email,onChange:o,required:!0}),e.createElement("img",{src:h,alt:"mail logo",className:"input-icon"}))),e.createElement("label",null,"Password",e.createElement("div",{className:"input-container"},e.createElement("input",{className:"pass-word",type:"password",name:"password",placeholder:"Enter Your Password",value:t.password,onChange:o,minLength:8,required:!0}),e.createElement("img",{src:f,alt:"padlock",className:"padlock-icon"}))),e.createElement("p",{className:"forgot-password"},e.createElement("a",{href:"forgot-password",className:"forgot-password-link"},"Forgot Password?")),e.createElement("button",{className:"signinbutton",type:"submit",disabled:!d},"SIGN IN"),e.createElement("p",{className:"link"},"Don't have an account? ",e.createElement("a",{href:"signup",className:"signup-link"},"Sign Up")))))};export{S as default};
